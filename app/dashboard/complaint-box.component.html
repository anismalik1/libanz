<app-header></app-header>
<div class="spinner-wrapper">
	<ngx-spinner
	  bdColor="rgba(255,255,255,0.8)"
	  size="default"
	  color="#ec9737"
	  loadingText="Loading..."
	  type="ball-clip-rotate">
	</ngx-spinner>
</div>
<section class="flash-deal">
    <div class="container">
        <div class="row no-margin">
            <div class="col s12 m3">
                <div class="card">
              <div class="card-content user-content">
                  <div class="user-image">
                      <img src="{{this.todoservice.base_url}}assets/images/recharge-icon/user.svg" class="responsive-img" alt="User-icon" width="50">
                  </div>
                  <div class="user-name">
                      <span>Welcome,</span><br>
                      <span class="font-size-change font600" *ngIf="this.todoservice.get_user()">{{this.todoservice.get_user_name()}}</span>
                  </div>
              </div>
            </div>
                <app-side-nav></app-side-nav>		    
            </div>
            <div class="col s12 m9">
                <!-- <div class="card export-and-import">
                    <div class="card-content">
                        <form class="date-export">
                            <div class="row no-margin">
                                <div class="col s12 m3">
                                    <input type="text" class="datepicker no-margin" placeholder="Start Date">
                                </div>
                                <div class="col s12 m1 center no-padding to">
                                    <span class="font600">TO</span>
                                </div>
                                <div class="col s12 m3">
                                    <input type="text" class="datepicker no-margin" placeholder="End Date">
                                </div>
                                <div class="col s6 m2">
                                    <button type="Search" class="btn orange no-box-shadow">Export</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div> -->
                <div class="card">
                    <div class="card-content">
                        <h3 class="font600 inline-block">Complaint Box</h3>
                        <a href="javascript:" (click)="fetch_complaints(0,1)" class="right inline-block margin-top-cart"><button type="submit" class="btn orange no-box-shadow">Resolved Complaints</button></a>
                        <a href="javascript:" (click)="fetch_complaints(1,1)" class="right inline-block margin-top-cart"><button type="submit" class="btn orange no-box-shadow margin-right">In Progress Compalint</button></a>
                        <div class="overflow-scroll">							
                            <table id="datatable" class="display responsive-table datatable-example">
                                <thead>
                                    <tr>
                                        <th nowrap="nowrap" width="60px">S.No.</th>
                                        <th nowrap="nowrap" width="120px">Complaint No.</th>
                                        <th nowrap="nowrap">Order ID</th>
                                        <th nowrap="nowrap">Status</th>
                                        <th nowrap="nowrap" width="115px">Recharge No.</th>
                                        <th nowrap="nowrap" width="81px">Amount</th>
                                        <th nowrap="nowrap" width="145px">Complain remark</th>
                                        <th nowrap="nowrap" width="137px">Resolved remark</th>
                                        <th nowrap="nowrap" width="123px">Complain date</th>
                                        <th nowrap="nowrap" width="125px">Resolved date</th>
                                        <th nowrap="nowrap" width="35px" class="center"></th>
                                        <th nowrap="nowrap" width="70px;">Option</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th nowrap="nowrap" width="60px">S.No.</th>
                                        <th nowrap="nowrap" width="120px">Complaint No.</th>
                                        <th nowrap="nowrap">Order ID</th>
                                        <th nowrap="nowrap">Status</th>
                                        <th nowrap="nowrap" width="115px">Recharge No.</th>
                                        <th nowrap="nowrap" width="81px">Amount</th>
                                        <th nowrap="nowrap" width="145px">Complain remark</th>
                                        <th nowrap="nowrap" width="137px">Resolved remark</th>
                                        <th nowrap="nowrap" width="123px">Complain date</th>
                                        <th nowrap="nowrap" width="125px">Resolved date</th>
                                        <th nowrap="nowrap" width="35px" class="center"></th>
                                        <th nowrap="nowrap" width="70px;">Option</th>
                                    </tr>
                                </tfoot>
                                <tbody *ngIf="complaints_counts > 0">
                                    <tr *ngFor="let complaint of complaints | paginate: { id: 'server', itemsPerPage: this.todoservice.page_per_items(), currentPage: p, totalItems: complaints_counts };let i=index">
                                        <td>{{i+1}}</td>
                                        <td>{{complaint.complaint_id}}</td>
                                        <td>{{complaint.id}}</td>
                                        <td><span class="green white-text" *ngIf="complaint.recharge_status == 1">Success</span><span class="red white-text" *ngIf="complaint.recharge_status == 2">Failed</span><span class="yellow white-text" *ngIf="complaint.recharge_status == 3">Pending</span></td>
                                        <td>{{complaint.recharge_id}}</td>
                                        <td><i class="fa fa-inr"></i> {{complaint.amount}}</td>
                                        <td>{{complaint.title}}</td>
                                        <td>{{complaint.comment}}</td>
                                        <td><span>{{complaint.complaint_date | date: date:'dd M, Y'}}</span></td>
                                        <td><span *ngIf="complaint.update_time!='0000-00-00 00:00:00'">{{complaint.update_time | date: date:'dd M, Y'}}</span></td>
                                        <td><img src="{{this.todoservice.base_url}}assets/images/recharge-icon/active.png" class="responsive-img" alt="active"></td>
                                        <td class="center">
                                            <a href="#view-more" (click)="complaint_invoice(complaint.id)" class="btn tooltipped btn-icon orange modal-trigger" data-position="top" data-delay="40" data-tooltip="View"><i class="material-icons font-size-change">visibility</i></a>
                                        </td>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="complaints_counts == 0">
                                    <tr>
                                        <td colspan="12" class="center">No Active Complaints</td>
                                    </tr>
                                </tbody>	
                            </table>
                            <div class="has-text-centered right-align">
								<pagination-controls (pageChange)="getPage($event)" id="server"></pagination-controls>
							</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="view-more" class="modal complaint-modal">
    <div class="modal-content" *ngIf="loop_info == true">
      <h3 class="font600">Order Invoice</h3>
      <span class="modal-close close-mode"><i class="material-icons font-size-change1">close</i></span>
      <div class="row" >
      	<div class="col s12 m6">
      		<span class="font-size-change">Order #{{complaint_info[0].id}}</span>
      		<!-- <div class="order-date margin-top-cart">
      			<span class="font600">Order : </span>
      			<span>{{complaint_info.uniq_order_id}}</span>
      		</div> -->
      		<div class="order-date margin-top-cart">
      			<span class="font600">Order Date : </span>
      			<span>{{complaint_info[0].ord_date | date: date:'dd M, Y'}} <time>{{complaint_info[0].ord_date | date: date:'h:i a'}}</time></span>
      		</div>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Payment Status : </span>
      			<span>{{complaint_info[0].order_status}}</span>
      		</div>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Recharge Status : </span>
      			<span>{{complaint_info[0].rechrge_status}}</span>
      		</div>
      	</div>
      	<div class="col s12 m6">
      		<span class="font-size-change">User Detail</span>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Name : </span>
      			<span>{{complaint_info[0].name}}</span>
      		</div>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Email : </span>
      			<span>{{complaint_info[0].email}}</span>
      		</div>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Contact No : </span>
      			<span>{{complaint_info[0].phone}}</span>
      		</div>
      	</div>
      </div>
      <hr>
      <div class="row">
      	<div class="col s12">
      		<table class="responsive-table bordered striped highlight">
		        <thead>
		          <tr>
	              <th>Subscriber/Customer No.</th>
	              <th>Operator</th>
	              <th>Recharge Amount</th>
		          </tr>
		        </thead>
		        <tbody>
		          <tr>
		            <td>{{complaint_info[0].subcriber_id}}</td>
		            <td>{{complaint_info[0].oprator}}</td>
		            <td class="center"><i class="fa fa-inr"></i>{{complaint_info[0].amount}}</td>
		          </tr>
		        </tbody>
		      </table>
      	</div>
      </div>
      <hr>
      <div class="row margin-top">
      	<div class="col s12 right-align">
      		<span>Order Totals</span>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Grand Total : </span>
      			<span><i class="fa fa-inr"></i> {{complaint_info[0].amount}}</span>
      		</div>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Use Wallet Amount : </span>
      			<span><i class="fa fa-inr"></i> {{complaint_info[0].amount}}</span>
      		</div>
      		<div class="order-date margin-top-cart">
      			<span class="font600">Total Amount : </span>
      			<span><i class="fa fa-inr"></i> {{complaint_info[0].amount}}</span>
      		</div>
      	</div>
      </div>
    </div>
  </div>
  <app-footer-min></app-footer-min>